<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <style>
        body {
            background-color:whitesmoke;
        }
        div {
            margin-left:50px;
        }
    </style>
    <script>
        var app = angular.module("bhhc", []);
        var bhhcController = function ($scope, $http) {
            $scope.company = "BHHC";
            $scope.reasons = null;

            $scope.getReasons = function () {
                try {
                    var authToken = "Basic " + btoa("683202f0-d438-4b47-a426-813eb94f9d14");
                    $http({
                        method: "get",
                        headers: {
                            "content-type": "application=json",
                            "authorization":authToken
                        },
                        url: "https://bhhcwebapi-dev-as.azurewebsites.net/api/bhhc"
                    }).then(functionCallbackSuccess, functionCallbackError);
                }
                catch (err) {
                    alert(err.message);
                }
            };


            var functionCallbackSuccess = function (response) {
                $scope.reasons = response.data;
            };


            var functionCallbackError = function (reason) {
                alert("Error: " + reason.statusText + " " + reason.data.Message);
            };
        };

        app.controller("bhhcController", ["$scope", "$http", bhhcController]);
    </script>
  </head>

    <body ng-app="bhhc">
        <div ng-controller="bhhcController" ng-init="getReasons()">
            <h2>Top 3 Reasons I want to work for {{company}}</h2>
            <div ng-repeat="reason in reasons">
                {{$index+1}}. {{reason.Text}}
            </div>
        </div>
    </body>
</html>